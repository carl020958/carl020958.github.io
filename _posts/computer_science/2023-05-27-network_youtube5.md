---
title: "[Computer Science] 따라學IT 네트워크 기초1 - 3계층에서의 통신"
layout: single
date: '27/05/2023'
toc: true
toc_sticky: true
toc_label: Table of Contents
categories:
  - NETWORK
tags:
  - NETWORK
---

---
### 3계층에서의 통신
* 3계층의 기능
* 일반적인 IP주소
* 특수한 IP주소
* 


---
### 3계층의 기능
#### 3계층에서 하는 일
* 다른 네트워크 대역까지 어떻게 데이터를 전달할지 제어하는 일을 담당(즉, LAN과 LAN 간 통신)
* 3계층 간 통신을 위해서는 2계층의 스위치 만으로는 부족하며 라우터가 필요

#### 3계층에서 쓰는 주소
* IP 주소
```bash
ifconfig
en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
	options=6463<RXCSUM,TXCSUM,TSO4,TSO6,CHANNEL_IO,PARTIAL_CSUM,ZEROINVERT_CSUM>
  ...
	inet 171.24.23.3 netmask 0xfffffff0 broadcast 172.20.10.15
```

#### 3계층의 프로토콜
* ARP 프로토콜
* IPv4 / IPv6 프로토콜
* ICMP 프로토콜

---

### 일반적인 IP주소
* IP주소는 총 4byte(MAC주소는 6byte)
  * 1byte = 8bit, 8bit는 10진수로 0~255까지 표현 가능

#### Classful IP 주소
* 초창기에 사용한 낭비가 심한 클래스 별 IP주소

|클래스|네트워크 구분|시작 주소|마지막 주소|
|----|----------|-------|--------|
|A 클래스|0XXXXXXX, 첫 번째 필드|0.0.0.0|127.255.255.255|
|B 클래스|10XXXXXX, 두 번째 필드|128.0.0.0|191.255.255.255|
|C 클래스|110XXXXX, 세 번째 필드|192.0.0.0|223.255.255.255|
|D 클래스 (멀티캐스트)|1110XXXX|224.0.0.0|239.255.255.255|
|E 클래스 (예약)|1111XXXX|240.0.0.0|255.255.255.255|

#### Classfulless IP 주소
* `서브넷 마스크`: 네트워크 대역을 나눠주는데 사용하는 값
  * 즉, IP주소에서 네트워크 대역과 호스트를 구분
  * 2진수로 표기 시 1로 시작하며, 1과 1사이에는 0이 올 수 없음
    * 즉, 0이 한 번 나오면 그 뒤에는 모두 0이 오며 1과 0의 경계선이 네트워크 대역과 호스트를 구분하는 지점
  * 예시
    * IP: `192.168.100.68` & 서브넷 마스크: `255.255.255.192`
    * `255.255.255.192` == `11111111.11111111.11111111.11000000`
      * 즉, 2^6(64)개의 IP 주소를 사용할 수 있음
    * 즉 해당 IP가 속한 네트워크는 다음 4개의 네트워크 대역으로 날 수 있고 해당 IP는 그 중 2번째 네트워크에 속함
      * `192.168.100.0` ~ `192.168.100.63`
      * `192.168.100.64` ~ `192.168.100.127`
      * `192.168.100.128` ~ `192.168.100.191`
      * `192.168.100.192` ~ `192.168.100.255`
* `서브넷팅`: `하나의 네트워크 대역으로 여러개로 나누는 것`
* `슈퍼넷팅`: `여러개로 나누어진 네트워크 대역을 하나로 합치는 것`

<!-- * 예시
  * IP: 192.168.32.189/26
  * IP주소: 192.168.32.189
  * 서브넷 마스크: 255.255.255.192
    * 네트워크의 구분
  * 네트워크 ID: 192.168.32.128
  * 브로드캐스트 주소: 192.168.32.191
  * 사용 가능 IP 범위: 192.168.32.129 ~ 192.168.32.190 -->

#### 사설IP & 공인IP
* Subnetting을 해도 IP주소가 부족하여 현재는 Clasefullless & 사설 및 공인 IP주소를 함꼐 사용
* `NAT`를 활용하여 사설IP를 공인IP로 변환하여 사용
  * `NAT(Network Address Translation)`: 특정 IP를 다른 IP로 바꾸는 것(대표적으로 사설 IP를 공인IP로 변환)
* 따라서, 실제 인터넷 네트워크에서는 공인 IP만로만 통신하며, 외부 네트워크 대역에서는 다른 네트워크 대역의 사설 IP 대역이 보이지 않음
  * 이러한 특징 때문에 사설IP는 요청 후 응답의 통신만 되며, 그냥 응답을 받는 통신은 되지 않음
    * 포트 포워딩을 통해 해결하는 방법 존재
<!-- * 공인 IP당 2^32개의 사설 IP를 할당 할 수 있음 -->
* 가정에서의 예시
  1) 핸드폰 & 노트북이 모두 공유기에 연결되어 있으며 두 개의 기계에서 네이버 홈페이지에 접속
  2) 공유기에서 사설 IP주소가 공인IP로 바뀌어 네이버에게 데이터 요청
  3) 네이버에서 해당 IP로 데이터 전송(이떄 같은 IP주소가 요청한 것으로 인식됨)
  4) 공유기가 해당 데이터를 요청한 기계한테 전송

---

### 특수한 IP주소
* `나머지 모든 IP`: `0.0.0.0/0`
* `localhost`: `127.0.0.1`
* `게이트웨이`: `다른 네트워크 간 통신을 가능하게 하는 컴퓨터나 소프트웨어를 두루 일컫는 용어`
  * 가정집에서는 주로 공유기이며, 해당 네트워크 대역에서 가장 작은 혹은 가장 큰 IP주소를 사용(일반적으로 가장 낮은 IP주소를 사용)

---


### 사설 IP & 공인 IP 확인
```bash
ifconfig
# en0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
#         options=6463<RXCSUM,TXCSUM,TSO4,TSO6,CHANNEL_IO,PARTIAL_CSUM,ZEROINVERT_CSUM>
#         ether b0:be:83:01:23:45 
#         ...
#         inet 11.23.12.5 netmask 0xffffff00 broadcast 01.23.21.255
#         ...

# 공인IP: 네이버에 내 IP 주소 검색/
```

---

### ref
* [🔗 영상](https://www.youtube.com/watch?v=s5kIGnaNFvM&list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi&index=6)
