---
title: "[Kubernetes] Declarative Kubernetes YAML"
layout: single
date: '26/04/2023'
toc: true
toc_sticky: true
toc_label: Table of Contents
categories:
  - KUBERNETES
tags:
  - DevOps
---

---
### Declarative Kubernetes YAML
* Kubectl apply
* Kubernetes Configuration YAML
* Building YAML Files
* Building YAML soec
* Dry Runs and Diff's
* Labels and Annotations

---

### Kubectl apply

```bash
kubectl apply -f filename.yaml
```

---

### Kubernetes Configuration YAML
* Each file contains one or more manifests
* Each manifest describe an API object(e.g. deployment, job, secret, etc.)
* Each manifest needs four parts(`apiVersion`, `kind`, `metadata`, `spec`)

#### Pod

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
    - name: nginx
      image: nginx:1.17.3
      ports:
        - containerPort: 80
```

#### Deployment

```yaml
apiVersion: apps/v1 # api version is different with above since it is related with the kind(in this case deployment)
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  selector:
    matchLabels:
      app: nginx
  replicas: 2
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
        - name: nginx
          image: nginx:1.17.3
          ports:
            - containerPort: 80
```

#### Deployment & Service

```yaml
apiVersion: v1
kind: Service
metadata:
  name: app-nginx-service
spec:
  type: NodePort
  ports:
    - port: 80
  selector:
    app: app-nginx
--- # way of telling k8s that the code above and below are entities
apiVersion: apps/v1
kind: Deployment
metadata:
  name: app-nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: app-nginx
  template:
    metadata:
      labels:
        app: app-nginx
    spec:
      containers:
        - name: nginx
          image: nginx:1.17.3
          ports:
            - containerPort: 80
```

---